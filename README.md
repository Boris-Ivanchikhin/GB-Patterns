#### Course: GOF Design Patterns  
#### Lesson  07. Patterns: Memento, RAII and PIMPL

***

1. Применить паттерн <b>RAII</b> для функций логирования.  

   <b>Задача</b>: Возьмём <b>самую первую версию</b> исходного кода проекта <b>SBomber</b>, где мы ещё не использовали паттерн «<b>Одиночки</b>» (<b>Singleton</b>). Посмотрим на функцию main. В её начале мы вызываем:  

    > MyTools::OpenLogFile("log.txt");  

   А в конце:  

    > MyTools::CloseLogFile();  

   Такой подход к логированию в файл небезопасен по двум причинам.  
   Во-первых, программист может забыть вызвать функцию закрытия файла по ошибке.  
   Во-вторых, если после открытия файла в процессе игры возникнет исключение, функция закрытия файла вызвана не будет.  
   Можно сделать более безопасную реализацию логирования с использованием шаблона <b>RAII</b>. Для этого нужно перенести открытие лог-файла в конструктор, а закрытие, соответственно, — в деструктор. Также перенесём в этот класс и остальные функции, которые участвуют в логировании.  
   В этом файле создадим глобальный объект <b>FileLogger logger</b>, через который будем вести лог игры. Вспомним, что для доступа к нему из других единиц трансляции
(файлов .cpp), необходима директива <b>extern</b>.  

2. (*)Применить паттерн <b>PIMPL</b> для класса <b>SBomber</b>.  

   <b>Задача</b>: предположим, что мы хотим распространять класс <b>SBomber</b> как движок — через статические библиотеки (lib). С ним нам также придётся распространять и заголовочный файл. При нынешней реализации класса его пользователи увидят его внутренности — переменные и массивы объектов — и, частично, его реализацию (список приватных функций).  
   Давайте применим шаблон <b>PIMPL</b>, чтобы скрыть приватные функции и члены данных. Для этого перенесём их в отдельный класс <b>SBomberImpl</b>, а указатель на него объявим в приватной секции класса <b>SBomber</b>. Члены данных класса <b>SBomberImpl</b> можно сделать публичными, что к ним проще было обращаться из класса <b>SBomber</b>.  